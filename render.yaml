services:
  - type: web
    name: mi-app-django
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn punto_venta.wsgi:application --bind 0.0.0.0:10000"
    preDeployCommand: "python manage.py migrate"  # ðŸ‘ˆ Ejecuta migraciones antes de iniciar la app
    envVars:
      - key: DJANGO_SETTINGS_MODULE
        value: punto_venta.settings  # AsegÃºrate que este sea correcto
      - key: SECRET_KEY
        generateValue: true
      - key: DATABASE_URL
        fromDatabase:
          name: mi-db
          property: connectionString

databases:
  - name: mi-db
    plan: free
    databaseName: mi_db
    user: mi_user
